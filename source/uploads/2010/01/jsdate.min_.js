/* jsdate by Pam Griffith http://www.pamgriffith.net
 * implements most of PHP date() http://php.net/manual/en/function.date.php
 * except time zone name or abbrev. & daylight savings ('e', 'I', and 'T')
 * 
 * day of the year adapted from http://javascript.about.com/library/bldayyear.htm
 * week number adapted from Nick Baicoianu at MeanFreePath http://www.meanfreepath.com/support/getting_iso_week.html
 */
Date.prototype.format=function(g){var j=this;if(typeof(g)=='undefined'||g=='')return j.toString();var k={d:function(){return l.zerofill(j.getDate(),2)},D:function(){return k.l().substr(0,3)},j:function(){return j.getDate()},l:function(){var a=new Array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');return a[j.getDay()]},N:function(){var a=j.getDay();if(a==0)a=7;return a},S:function(){var a=''+j.getDate();if(a>10&&a<14)return'th';switch(parseInt(a.substr(-1,1))){case 1:return'st';case 2:return'nd';case 3:return'rd';default:return'th'}},w:function(){return j.getDay()},z:function(){var a=new Date(j.getFullYear(),0,1);return Math.ceil((j-a)/86400000)},W:function(){dowOffset=1;var a=new Date(j.getFullYear(),0,1);var b=a.getDay()-dowOffset;b=(b>=0?b:b+7);var c=Math.floor((j.getTime()-a.getTime()-(j.getTimezoneOffset()-a.getTimezoneOffset())*60000)/86400000)+1;var d;if(b<4){d=Math.floor((c+b-1)/7)+1}else{d=Math.floor((c+b-1)/7);if(d==0){var e=new Date(j.getFullYear()-1,11,31);d=parseInt(e.format('W'))}}if(d>52){nYear=new Date(j.getFullYear()+1,0,1);nday=nYear.getDay()-dowOffset;nday=nday>=0?nday:nday+7;d=nday<4?1:53}return l.zerofill(d,2)},F:function(){var a=new Array('January','February','March','April','May','June','July','August','September','October','November','December')return a[j.getMonth()]},m:function(){return l.zerofill(j.getMonth()+1,2)},M:function(){return k.F().substr(0,3)},n:function(){return j.getMonth()+1},t:function(){if(j.getMonth()!=1){var h=new Date(j.getFullYear(),j.getMonth()+1,0);return h.getDate()}else{if(k.L())return 29;else return 28}},L:function(){var a=j.getFullYear();return(((a%4==0)&&(a%100!=0))||(a%400==0))?1:0},o:function(){if(j.getMonth()==0&&j.format('W')>50)return j.getFullYear()-1;else if(j.getMonth()==11&&j.format('W')==1)return j.getFullYear()+1;else return j.getFullYear()},Y:function(){return j.getFullYear()},y:function(){return j.getFullYear().toString().substr(-2)},a:function(){var h=j.getHours();if(h<12)return'am';else return'pm'},A:function(){return k.a().toUpperCase()},B:function(){return l.zerofill(Math.floor((((j.getHours()+1)*3600*1000)+(j.getMinutes()*60*1000)+(j.getSeconds()*1000))/86400),3)},g:function(){var h=j.getHours();if(h==0)return 12;if(h>12)return h-12;else return h},G:function(){return j.getHours()},h:function(){return l.zerofill(k.g(),2)},H:function(){return l.zerofill(k.G(),2)},i:function(){return l.zerofill(j.getMinutes(),2)},s:function(){return l.zerofill(j.getSeconds(),2)},u:function(){return j.getMilliseconds()+'000'},e:function(){return undefined},I:function(){return undefined},T:function(){return undefined},O:function(){var a=j.getTimezoneOffset();var f=l.zerofill(((Math.abs(a)/60)*100),4);if(a>0)f='+'+f;else if(a<0)f='-'+f;return f},P:function(){var a=j.getTimezoneOffset();var f=l.zerofill(Math.floor(Math.abs(a)/60),2)+':'+l.zerofill((Math.abs(a)%60),2);if(a>0)f='+'+f;else if(a<0)f='-'+f;return f},Z:function(){return j.getTimezoneOffset()*60},c:function(){return j.format('Y-m-d\TH:i:sP')},r:function(){return j.format('D, d M Y H:i:s O')},U:function(){return Math.round(j.getTime()/1000)}}var l={zerofill:function(a,b){var c=a.toString();if(c.length<b){var d='';var e=b-c.length;for(var i=0;i<e;i++){d+='0'}d+=c;return d}else return c}}var m='';for(var i=0;i<g.length;i++){if(g[i]=='\\'){i++;if(typeof(g[i])!='undefined')m+=g[i]}else if(typeof(k[g[i]])=='function'){m+=k[g[i]]()}else{m+=g[i]}}return m}